<!--pages/goods/details/index.wxml-->
<view class="goods-detail-page">
  <view class="goods-head">
    <!--轮播图  -->
    <swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
      <swiper-item wx:for="{{good_info.detail_img}}" wx:key="index">
        <image src="{{item}}" />
      </swiper-item>
    </swiper>
    
    <view class="goods-info">
      <view class="goods-number">
        <view class="goods-price">
          <price
            wr-class="class-goods-price"
            symbol-class="class-goods-symbol"
            price="{{minSalePrice}}"
            type="lighter"
          />
          <view class="goods-price-up">起</view>
          <price wr-class="class-goods-del" price="{{good_info.maxLinePrice}}" type="delthrough" />
        </view>
        <view class="sold-num">已售{{good_info.soldNum}}</view>
      </view>
      <view wx:if="{{activityList.length > 0}}" class="goods-activity">
        <view class="tags-container">
          <view wx:for="{{activityList}}" data-promotionId="{{item.promotionId}}" wx:key="index" wx:if="{{index<4}}">
            <view class="goods-activity-tag">{{item.tag}}</view>
          </view>
        </view>
        <view class="activity-show">
          <view class="activity-show-text">领劵</view>
          <t-icon name="chevron-right" size="42rpx" />
        </view>
      </view>
      <view class="goods-title">
        <view class="goods-name">{{good_info.title}}</view>
        <view class="goods-tag">
          <t-button open-type="share" t-class="shareBtn" variant="text">
            <view class="btn-icon">
              <t-icon name="share" size="40rpx" color="#000" />
              <view class="share-text">分享</view>
            </view>
          </t-button>
        </view>
      </view>
      <view class="goods-intro">{{intro}}</view>
    </view>
    <view class="spu-select" bindtap="showSkuSelectPopup">
      <view class="label">已选</view>
      <view class="content">
        <view class="{{!selectedAttrStr ? 'tintColor' : ''}}">
          {{selectedAttrStr ? buyNum : ''}}{{selectedAttrStr || '请选择'}}
        </view>
        <t-icon name="chevron-right" size="40rpx" color="#BBBBBB" />
      </view>
    </view>
    <view wx:if="{{ commentsStatistics.commentCount > 0 }}" class="comments-wrap">
      <view class="comments-head" bindtap="navToCommentsListPage">
        <view class="comments-title-wrap">
          <view class="comments-title-label">商品评价</view>
          <view class="comments-title-count"> ({{ commentsStatistics.commentCount }}) </view>
        </view>
        <view class="comments-rate-wrap">
          <view class="comments-good-rate">{{commentsStatistics.goodRate}}% 好评</view>
          <t-icon name="chevron-right" size="40rpx" color="#BBBBBB" />
        </view>
      </view>
      <view class="comment-item-wrap" wx:for="{{ commentsList }}" wx:for-item="commentItem" wx:key="goodsSpu">
        <view class="comment-item-head">
          <t-image src="{{commentItem.userHeadUrl}}" t-class="comment-item-avatar" />
          <view class="comment-head-right">
            <view class="comment-username">{{commentItem.userName}}</view>
            <t-rate
              value="{{ commentItem.commentScore }}"
              count="{{5}}"
              size="12"
              gap="2"
              color="{{['#ffc51c', '#ddd']}}"
            />
          </view>
        </view>
        <view class="comment-item-content"> {{commentItem.commentContent}} </view>
      </view>
    </view>
  </view>
  
</view>
